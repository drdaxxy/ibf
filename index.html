<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">
	<link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">
	<link rel="stylesheet" href="ibf.css">
	<script src="interpreter.js"></script>
	
	<title>(Non-)Interactive Brainfuck</title>
</head>

<body>

<script>
var interpreter;

var input_func = function(cb)
{
	cb(prompt("Input one character").charCodeAt(0));
	interpreter.run();
}

var output_func = function(id)
{
	return function(cb)
	{
		div = document.getElementById(id).innerHTML;
		div.innerHTML += String.fromCharCode(byte);
		div.scrollTop = div.scrollHeight;
	}
}

function switchNoninteractive()
{
	document.getElementById("noninteractive-output").innerHTML = "";
	document.getElementById("buttonmode").style.display = "none";
	document.getElementById("noninteractive").style.display = "";
}

function switchButtonmode()
{
	document.getElementById("noninteractive").style.display = "none";
	document.getElementById("buttonmode").style.display = "";
}

function noninteractiveRunInterpreter()
{
	document.getElementById("noninteractive-output").innerHTML = "";
	code = document.getElementById("noninteractive-code").value;
	counter = 0;
	interpreter = new Brainfuck(
		function(cb) {
			if(counter < code.length)
			{
				cb(code[counter]);
				counter++;
				interpreter.run();
			}
		},
		input_func,
		output_func("noninteractive-output")
	);
	interpreter.run();
}
</script>
	<div class="navbar navbar-default">
		<div class="container">
			<div class="navbar-header">
				<span class="navbar-brand">Interactive Brainfuck - select/restart</span>
			</div>
			<ul class="nav navbar-nav">
				<li><a href="#" onclick="switchNoninteractive()">Non-interactive mode</a></li>
				<li><a href="#" onclick="switchButtonmode()">Button mode</a></li>
			</ul>
		</div>
	</div>
	
	<div class="container" id="noninteractive">
		<p>
			<textarea rows="10" id="noninteractive-code"></textarea>
		</p>
		<p><button type="button" class="btn btn-default" onclick="noninteractiveRunInterpreter()">run this</button></p>
		<p>
			Output:
		</p>
		<div id="noninteractive-output" class="well output"></div>
	</div>
	
	<div class="container" id="buttonmode" style="display: none;">
		<div id="noninteractive-output" class="well output"></div>
		<p>
			<button type="button" class="btn btn-lg btn-default" onclick="buttonmodeSend('>')" disabled>&gt;</button>
			<button type="button" class="btn btn-lg btn-default" onclick="buttonmodeSend('<')" disabled>&lt;</button>
			<button type="button" class="btn btn-lg btn-default" onclick="buttonmodeSend('+')" disabled>+</button>
			<button type="button" class="btn btn-lg btn-default" onclick="buttonmodeSend('-')" disabled>-</button>
			<button type="button" class="btn btn-lg btn-default" onclick="buttonmodeSend('.')" disabled>.</button>
			<button type="button" class="btn btn-lg btn-default" onclick="buttonmodeSend(',')" disabled>,</button>
			<button type="button" class="btn btn-lg btn-default" onclick="buttonmodeSend('[')" disabled>[</button>
			<button type="button" class="btn btn-lg btn-default" onclick="buttonmodeSend(']')" disabled>]</button>
		</p>
	</div>
	
	<script src="//code.jquery.com/jquery.js"></script>
	<script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
</body>
</html>